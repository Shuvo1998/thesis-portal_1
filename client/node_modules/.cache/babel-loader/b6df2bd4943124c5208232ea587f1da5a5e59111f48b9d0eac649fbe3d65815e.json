{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ThesisList=()=>{const[theses,setTheses]=useState([]);const[search,setSearch]=useState('');const fetchTheses=()=>{axios.get(`http://localhost:5000/api/theses?search=${search}`).then(res=>{console.log('Fetched theses:',res.data);setTheses(res.data);}).catch(err=>console.error(err));};useEffect(()=>{fetchTheses();},[search]);const handleStatusChange=(id,newStatus)=>{axios.put(`http://localhost:5000/api/thesis/${id}/status`,{status:newStatus}).then(()=>{setSearch('');// Reset search to refresh the list\nfetchTheses();}).catch(err=>console.error(err));};const handleDelete=id=>{axios.delete(`http://localhost:5000/api/thesis/${id}`).then(()=>fetchTheses()).catch(err=>console.error(err));};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4\",children:\"Uploaded Theses\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by title, author, keywords\",value:search,onChange:e=>setSearch(e.target.value),className:\"border px-3 py-2\"}),/*#__PURE__*/_jsx(\"button\",{onClick:fetchTheses,className:\"ml-2 px-4 py-2 bg-blue-500 text-white rounded\",children:\"Search\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table-auto w-full border\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"bg-gray-200\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Author\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Uploaded At\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Action\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 border\",children:\"Download\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:theses.map(thesis=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 border\",children:thesis.title}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 border\",children:thesis.author}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 border\",children:new Date(thesis.uploadedAt).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 border\",children:thesis.status||'pending'}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-2 border\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusChange(thesis._id,'approved'),className:\"bg-green-500 text-white px-2 py-1 mr-2 rounded\",children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleStatusChange(thesis._id,'rejected'),className:\"bg-red-500 text-white px-2 py-1 rounded\",children:\"Reject\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(thesis._id),className:\"bg-yellow-500 text-white px-2 py-1 ml-2 rounded\",children:\"Delete\"}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 border\",children:/*#__PURE__*/_jsx(\"a\",{href:`http://localhost:5000/${thesis.filePath}`,download:true,className:\"bg-blue-500 text-white px-2 py-1 rounded\",children:\"Download\"})})]},thesis._id))})]})]});};export default ThesisList;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","ThesisList","theses","setTheses","search","setSearch","fetchTheses","get","then","res","console","log","data","catch","err","error","handleStatusChange","id","newStatus","put","status","handleDelete","delete","className","children","type","placeholder","value","onChange","e","target","onClick","map","thesis","title","author","Date","uploadedAt","toLocaleDateString","_id","href","filePath","download"],"sources":["D:/my-thesis-portal/client/src/components/ThesisList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst ThesisList = () => {\r\n  const [theses, setTheses] = useState([]);\r\n  const [search, setSearch] = useState('');\r\n\r\n  const fetchTheses = () => {\r\n    axios.get(`http://localhost:5000/api/theses?search=${search}`)\r\n      .then(res => {\r\n        console.log('Fetched theses:', res.data); \r\n        setTheses(res.data)})\r\n      .catch(err => console.error(err));\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTheses();\r\n  }, [search]);\r\n\r\n  const handleStatusChange = (id, newStatus) => {\r\n    axios.put(`http://localhost:5000/api/thesis/${id}/status`, { status: newStatus })\r\n      .then(() => {\r\n        setSearch(''); // Reset search to refresh the list\r\n        fetchTheses()})\r\n      .catch(err => console.error(err));\r\n  };\r\nconst handleDelete = (id) => {\r\n  axios.delete(`http://localhost:5000/api/thesis/${id}`)\r\n    .then(() => fetchTheses())\r\n    .catch(err => console.error(err));\r\n};\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <h2 className=\"text-2xl font-bold mb-4\">Uploaded Theses</h2>\r\n\r\n      <div className=\"mb-4\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search by title, author, keywords\"\r\n          value={search}\r\n          onChange={(e) => setSearch(e.target.value)}\r\n          className=\"border px-3 py-2\"\r\n        />\r\n        <button\r\n          onClick={fetchTheses}\r\n          className=\"ml-2 px-4 py-2 bg-blue-500 text-white rounded\"\r\n        >\r\n          Search\r\n        </button>\r\n      </div>\r\n\r\n      <table className=\"table-auto w-full border\">\r\n        <thead>\r\n          <tr className=\"bg-gray-200\">\r\n            <th className=\"px-4 py-2 border\">Title</th>\r\n            <th className=\"px-4 py-2 border\">Author</th>\r\n            <th className=\"px-4 py-2 border\">Uploaded At</th>\r\n            <th className=\"px-4 py-2 border\">Status</th>\r\n            <th className=\"px-4 py-2 border\">Action</th>\r\n            <th className=\"px-4 py-2 border\">Download</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {theses.map((thesis) => (\r\n            <tr key={thesis._id}>\r\n              <td className=\"px-4 py-2 border\">{thesis.title}</td>\r\n              <td className=\"px-4 py-2 border\">{thesis.author}</td>\r\n              <td className=\"px-4 py-2 border\">\r\n                {new Date(thesis.uploadedAt).toLocaleDateString()}\r\n              </td>\r\n              <td className=\"px-4 py-2 border\">{thesis.status || 'pending'}</td>\r\n              <td className=\"px-4 py-2 border\">\r\n                <button\r\n                  onClick={() => handleStatusChange(thesis._id, 'approved')}\r\n                  className=\"bg-green-500 text-white px-2 py-1 mr-2 rounded\"\r\n                >\r\n                  Approve\r\n                </button>\r\n                <button\r\n                  onClick={() => handleStatusChange(thesis._id, 'rejected')}\r\n                  className=\"bg-red-500 text-white px-2 py-1 rounded\"\r\n                >\r\n                  Reject\r\n                </button>\r\n              </td>\r\n              <button\r\n  onClick={() => handleDelete(thesis._id)}\r\n  className=\"bg-yellow-500 text-white px-2 py-1 ml-2 rounded\"\r\n>\r\n  Delete\r\n</button>\r\n              <td className=\"px-4 py-2 border\">\r\n        <a\r\n          href={`http://localhost:5000/${thesis.filePath}`}\r\n          download\r\n          className=\"bg-blue-500 text-white px-2 py-1 rounded\"\r\n        >\r\n          Download\r\n        </a>\r\n      </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ThesisList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}